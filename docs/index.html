<!DOCTYPE html>
<html>
<head>
  <title>workflow-svg.js</title>  
  <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/polyfills.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/polyfillsIE.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.draggable.js/dist/svg.draggable.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/workflow-svg.js@0.0.4/lib/workflow-svg.minified.min.js"></script>
  
  <!--use this one if you want to test some code-->
  <!-- <script src="./../src/workflow-svg.js"></script> -->

  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="./style.css">

  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
    <script>

    var callback = function(){
      document.getElementById("json").innerHTML  = JSON.stringify(w2.get(), undefined, 2);
    }

    var w = new WorkflowSVG();
    w.initalize("#test", 500, 400);

    var w2 = new WorkflowSVG();
    w2.initalize("#test2", 500, 400);
    
    w.update({
      entities:[
        {id:'first', text:'first', x: 10, y: 10, width: 100, height: 100, backgroundcolor:'#f06', color: '#ffffff', radius: 10},
        {id:'second', text:'second', x: 125, y: 125, width: 100, height: 100, backgroundcolor:'#f06', color: '#ffffff', radius: 10},
        {id:'third', text:'third', x: 250, y: 250, width: 100, height: 100, backgroundcolor:'#f06', color: '#ffffff', radius: 10}
      ],
      lines: [],
      configuration: {
        line_color: '#f06',
        arrow_type: 'default'
      }
    });

    w2.update({
  "entities": [
    {
      "id": "new",
      "text": "new",
      "x": 10,
      "y": 222,
      "width": 100,
      "height": 60,
      "backgroundcolor": "#118FA3",
      "color": "#ffffff",
      "radius": 2,
      "class": "active",
      "displaytype": "entity"
    },
    {
      "id": "in-progress",
      "text": "in progress",
      "x": 160,
      "y": 100,
      "width": 100,
      "height": 60,
      "backgroundcolor": "#FFD044",
      "color": "#ffffff",
      "radius": 2,
      "displaytype": "entity"
    },
    {
      "id": "finished",
      "text": "finished",
      "x": 310,
      "y": 100,
      "width": 100,
      "height": 60,
      "backgroundcolor": "#BCBF00",
      "color": "#ffffff",
      "radius": 2,
      "displaytype": "entity"
    },
    {
      "id": "x",
      "text": "x",
      "displaytype": "operation",
      "x": 171.5,
      "y": 213.5,
      "width": 40,
      "height": 40,
      "backgroundcolor": "#666666",
      "color": "#ffffff",
      "radius": 2
    }
  ],
  "lines": [
    {
      "id": "line-0",
      "from": {
        "element": "in-progress",
        "point": "right"
      },
      "to": {
        "element": "finished",
        "point": "left"
      }
    },
    {
      "id": "line-1",
      "from": {
        "element": "x",
        "point": "top"
      },
      "to": {
        "element": "in-progress",
        "point": "bottom"
      }
    },
    {
      "id": "line-2",
      "from": {
        "element": "x",
        "point": "right"
      },
      "to": {
        "element": "finished",
        "point": "bottom"
      }
    }
  ],
  "configuration": {
    "line_color": "#000000",
    "arrow_type": "default",
    "readonly": false
  }
});

    w2.register('entity:moved', callback);
    w2.register('line:added', callback);

    var w3 = new WorkflowSVG();
    w3.initalize("#test3", 500, 400);

    w3.update({
      "entities":[
        {"id":"search","text":"search","x":20,"y":10,"width":100,"height":60,"backgroundcolor":"#ACFCD9","color":"#2F4858","radius":2},
        {"id":"analyze","text":"analyze","x":20,"y":110,"width":100,"height":60,"backgroundcolor":"#5DD9C1","color":"#2F4858","radius":2},
        {"id":"review","text":"review","x":20,"y":210,"width":100,"height":60,"backgroundcolor":"#98C1D9","color":"#2F4858","radius":2},
        {"id":"useit","text":"use it","x":20,"y":310,"width":100,"height":60,"backgroundcolor":"#4F7CAC","color":"#F0F7EE","radius":2}
      ],
      "lines": [
        {
          "id": "line-0",
          "from": {
            "element": "search",
            "point": "bottom"
          },
          "to": {
            "element": "analyze",
            "point": "top"
          }
        },
        {
          "id": "line-1",
          "from": {
            "element": "analyze",
            "point": "bottom"
          },
          "to": {
            "element": "review",
            "point": "top"
          }
        },
        {
          "id": "line-2",
          "from": {
            "element": "review",
            "point": "bottom"
          },
          "to": {
            "element": "useit",
            "point": "top"
          }
        }
      ],
      "configuration":{"line_color":"#000000","arrow_type":"default", "readonly": true}
    });

    </script>

    <div class="container">
      <div class="github-badge">
        <a href="https://github.com/thomaswruss/workflow-svg.js">
          <img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=149%2C149" 
          class="attachment-full size-full" 
          alt="Fork me on GitHub" 
          data-recalc-dims="1">
        </a>
      </div>

      <h1>workflow-svg.js</h1>
      <p>
        workflow-svg.js is an easy to use library to visualize an workflow and to adapt it. Just try it! 
      </p> 

      <div style="display:flex; margin-bottom:20px;">
        <div id="test"><div class="example">Example</div></div>
        <div style="margin-left: 20px;">
          <p>
            You can drag and drop the workflow entities. 
            On the edges of a entity you can create a line to another entity. 
            Just select the starting point ...
          </p>
          <img src="example-1_.png" style="width:120px"/>
          <p>
            ... and then select the target point. That is all!
          </p>
          <img src="example-2_.png" style="width:120px"/>
        </div>

      </div>
      <p>
            Define your workflow with a simple JSON. You can configure and define your entities and lines and operations between entities. 
            You can define different types, colors, size and even classes to apply your style from a css.
      </p>
      <p>
        <a class="button-secondary" href="https://github.com/thomaswruss/workflow-svg.js">See documentation</a>
      </p>

      <div style="display:flex; margin-bottom:20px;">
        <div style="padding-right: 10px; margin-right: 20px;">
          
          <p>
            Try to connect "new" and "in progress" and see the result as a JSON. 
          </p>
          <p>Output:</p>
          <pre id="json">...change something on the left side</pre>
        </div>
        <div>
        <div id="test2"><div class="example">Example</div></div>
          
        </div>
      </div>

      <div style="display:flex; margin-bottom:20px;">        
        <div id="test3"><div class="example">Example</div></div>
        <div style="margin-left: 20px;">     
          <p>
            You can use workflow-svg.js in "read-only" mode too. Just add 
            <span class="code">"readonly": true</span> in the config.
          </p>
        </div>
      </div>

      <div style="display:flex; flex-wrap: wrap; align-items: center; margin-top:20px;">
        <div class="circle">2</div>
        <p>
          workflow-svg.js is small and light. It has only two other dependencies which you need to import.
        </p>
      </div>
      <div style="display:flex; flex-wrap: wrap; align-items: center; margin-top:20px;">
        <div class="circle">4</div>
        <p>
          workflow-svg.js is easy to use. It has just 4 methods. Simple but usefull.
        </p>
      </div>
      <div style="text-align: center; padding-top:50px;">
        <a class="button" href="https://github.com/thomaswruss/workflow-svg.js">GET IT NOW</a>
      </div>

      <div class="footer">
        workflow-svg.js is under MIT License
      </div>
    </div>
</body>
</html>